<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Catalog Assistant</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/babel-standalone@6.26.0/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Main App Component
    function App() {
      const [products, setProducts] = useState([]);
      const [input, setInput] = useState('');
      const [isListening, setIsListening] = useState(false);
      const [language, setLanguage] = useState('en-IN');

      // Mock function to simulate AI processing (replace with backend API call)
      const processInput = (inputText) => {
        const mockProduct = {
          id: Date.now(),
          name: inputText.split(' ')[1] || 'Product',
          quantity: inputText.match(/\d+/)?.[0] || '1',
          price: inputText.match(/‚Çπ\d+/)?.[0]?.replace('‚Çπ', '') || '0',
          description: `Fresh and high-quality ${inputText.split(' ')[1] || 'product'}`,
        };
        setProducts([...products, mockProduct]);
        setInput('');
      };

      // Voice Recognition Setup
      useEffect(() => {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (SpeechRecognition) {
          const recognition = new SpeechRecognition();
          recognition.lang = language;
          recognition.continuous = false;
          recognition.interimResults = false;

          recognition.onstart = () => setIsListening(true);
          recognition.onend = () => setIsListening(false);
          recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            setInput(transcript);
            processInput(transcript);
          };

          recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            setIsListening(false);
          };

          if (isListening) {
            recognition.start();
          }

          return () => recognition.stop();
        }
      }, [isListening, language]);

      // Handle Export as PDF (Mock)
      const exportCatalog = () => {
        alert('Exporting catalog as PDF...');
        // In a real app, generate PDF using a library like jsPDF
      };

      // Handle Share via WhatsApp (Mock)
      const shareCatalog = () => {
        alert('Sharing catalog via WhatsApp...');
        // In a real app, use Web Share API or WhatsApp link
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-100 to-green-100 p-4">
          <div className="max-w-4xl mx-auto">
            <h1 className="text-3xl font-bold text-center text-blue-800 mb-6 animate-pulse">
              Smart Catalog Assistant
            </h1>

            {/* Language Selector */}
            <div className="mb-4">
              <select
                value={language}
                onChange={(e) => setLanguage(e.target.value)}
                className="p-2 rounded-lg bg-white shadow-md focus:outline-none"
              >
                <option value="en-IN">English (India)</option>
                <option value="hi-IN">Hindi</option>
                <option value="ta-IN">Tamil</option>
                <option value="te-IN">Telugu</option>
              </select>
            </div>

            {/* Input Section */}
            <div className="flex items-center space-x-4 mb-6">
              <input
                type="text"
                value={input}
                onChange={(e) => setInput(e.target.value)}
                placeholder="E.g., Add 1kg tomatoes ‚Çπ30"
                className="flex-1 p-3 rounded-lg bg-white shadow-md focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all duration-300"
              />
              <button
                onClick={() => processInput(input)}
                className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-transform transform hover:scale-105"
              >
                Add
              </button>
              <button
                onClick={() => setIsListening(!isListening)}
                className={`px-4 py-2 rounded-lg transition-transform transform hover:scale-105 ${
                  isListening ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'
                } text-white`}
              >
                {isListening ? 'Stop Listening' : 'üéôÔ∏è Speak'}
              </button>
            </div>

            {/* Catalog Display */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              {products.map((product) => (
                <div
                  key={product.id}
                  className="p-4 bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300"
                >
                  <h2 className="text-xl font-semibold text-blue-800">{product.name}</h2>
                  <p className="text-gray-600">Quantity: {product.quantity}</p>
                  <p className="text-gray-600">Price: ‚Çπ{product.price}</p>
                  <p className="text-gray-700 italic">{product.description}</p>
                  <button
                    onClick={() => setProducts(products.filter((p) => p.id !== product.id))}
                    className="mt-2 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-transform transform hover:scale-105"
                  >
                    Delete
                  </button>
                </div>
              ))}
            </div>

            {/* Export/Share Buttons */}
            <div className="mt-6 flex space-x-4 justify-center">
              <button
                onClick={exportCatalog}
                className="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-transform transform hover:scale-105"
              >
                Export as PDF
              </button>
              <button
                onClick={shareCatalog}
                className="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-transform transform hover:scale-105"
              >
                Share on WhatsApp
              </button>
            </div>
          </div>
        </div>
      );
    }

    // Render the App
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
